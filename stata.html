<head>
  <link rel="stylesheet" type="text/css" href="stmarkdown.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>
</head>
<h1><a href="#política-económica-ii-2021" id="política-económica-ii-2021">Política Económica II - 2021</a></h1>
<h1><a href="#conceptos-básicos-de-stata" id="conceptos-básicos-de-stata">Conceptos básicos de Stata</a></h1>
<h1><a href="#importación-de-datos" id="importación-de-datos">Importación de datos</a></h1>
<ul>
<li>
<p>Verificar que archivo fuente de datos posee los nombres de las variables en minúscula (y en caso que se requiera un espacio utilizar el guión bajo, ej.: gdp_growth) en la primera fila.</p>
</li>
<li>
<p>Verificar el formato numérico de las variables y que los separadores de decimales coincidan en ambos programas (set dp {comma|period} [, permanently]).</p>
</li>
<li>
<p>Se puede importar directamente desde Excel o se puede guardar el archivo como .csv delimitado por comas –o .txt delimitado por tabulaciones-. Excel avisa que el formato no soporta hojas múltiples, esto es lo que se está buscando.</p>
</li>
</ul>
<pre><code>. cd &quot;C:\Users\msang\OneDrive - BCRA\Politica II\2021\Clase01&quot;
C:\Users\msang\OneDrive - BCRA\Politica II\2021\Clase01

. import excel using datos_WB.xlsx, first sheet(1) clear
(11 vars, 60 obs)

. sum

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        year |         60      2015.5     2.89652       2011       2020
       cname |          0
       ccode |          0
  gdp_pc2010 |         60     25743.4     14119.3   8692.708   44235.93
  gdp_pc2017 |         60    31863.84    11682.23   14063.98   46406.46
-------------+---------------------------------------------------------
    gdp_2010 |         60    1.77e+12    1.04e+12   2.32e+11   2.97e+12
   credit_ps |         56    89.73292    38.92712   13.66763   170.6175
         inv |         60    18.82657    3.188056   13.37784   24.87574
     exports |         60    24.61464     7.97914   10.70565   37.76196
     imports |         60    24.53175    7.788909   11.78057   34.44371
-------------+---------------------------------------------------------
        popu |         60    7.64e+07    6.05e+07   1.72e+07   2.13e+08

. save wb_data.dta, replace
file wb_data.dta saved

</code></pre>
<pre><code>. import excel using datos_WB.xlsx, first sheet(2) clear
(2 vars, 6 obs)

. save meta.dta, replace
file meta.dta saved

</code></pre>
<h2><a href="#otra-forma" id="otra-forma">Otra forma</a></h2>
<pre><code>import delimited using datos_WB.csv, clear
</code></pre>
<h1><a href="#exportación-de-datos" id="exportación-de-datos">Exportación de datos</a></h1>
<ul>
<li>El dataset que está en memoria en Stata puede ser exportado a Excel o un archivo separado por comas (o de texto), el cual puede ser abierto por Excel.</li>
</ul>
<pre><code>export excel using data.xlsx, firstrow(var) sheet(1) sheetreplace
</code></pre>
<h2><a href="#otra-forma" id="otra-forma">Otra forma</a></h2>
<pre><code>export delimited data.txt, replace
</code></pre>
<h1><a href="#merge" id="merge">Merge</a></h1>
<pre><code>. use wb_data.dta, clear

. merge m:1 ccode using meta.dta, keep(match master) nogen

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                60  
    -----------------------------------------

</code></pre>
<h1><a href="#collapse" id="collapse">Collapse</a></h1>
<pre><code>. collapse gdp_pc2017 (max) expo_max = exports (p50) impo_p50 = imports, by(region)

</code></pre>
<pre><code>
     +---------------------------------------------------------------+
     |                    region   gdp_~2017    expo_max    impo_p50 |
     |---------------------------------------------------------------|
  1. |     Europe &amp; Central Asia   42979.497   31.771714   30.313668 |
  2. | Latin America &amp; Caribbean   20748.189   37.761957   14.533665 |
     +---------------------------------------------------------------+

</code></pre>
<ul>
<li><code>append</code> une bases de datos (una debajo de la otra, agrega observaciones).</li>
</ul>
<h1><a href="#reshape" id="reshape">Reshape</a></h1>
<h2><a href="#wide" id="wide">Wide</a></h2>
<pre><code>. use wb_data.dta, clear

. keep ccode year exports

. drop if year &lt; 2018
(42 observations deleted)

. rename exports expo

. reshape wide expo, i(ccode) j(year)
(note: j = 2018 2019 2020)

Data                               long   -&gt;   wide
-----------------------------------------------------------------------------
Number of obs.                       18   -&gt;       6
Number of variables                   3   -&gt;       4
j variable (3 values)              year   -&gt;   (dropped)
xij variables:
                                   expo   -&gt;   expo2018 expo2019 expo2020
-----------------------------------------------------------------------------

</code></pre>
<pre><code>
     +-------------------------------------------+
     | ccode    expo2018    expo2019    expo2020 |
     |-------------------------------------------|
  1. |   ARG   14.619831   17.439704   16.613722 |
  2. |   BRA   14.634999   14.105362   16.870855 |
  3. |   CHL   28.507184   28.023112   31.544868 |
  4. |   FRA   31.719156   31.771714   28.043478 |
  5. |   GBR   30.890068    31.07936   27.366351 |
  6. |   ITA   31.350462   31.695798   29.489713 |
     +-------------------------------------------+

</code></pre>
<h2><a href="#long" id="long">Long</a></h2>
<pre><code>. reshape long expo, i(ccode) j(year)
(note: j = 2018 2019 2020)

Data                               wide   -&gt;   long
-----------------------------------------------------------------------------
Number of obs.                        6   -&gt;      18
Number of variables                   4   -&gt;       3
j variable (3 values)                     -&gt;   year
xij variables:
             expo2018 expo2019 expo2020   -&gt;   expo
-----------------------------------------------------------------------------

</code></pre>
<pre><code>
     +--------------------------+
     | ccode   year        expo |
     |--------------------------|
  1. |   ARG   2018   14.619831 |
  2. |   ARG   2019   17.439704 |
  3. |   ARG   2020   16.613722 |
  4. |   BRA   2018   14.634999 |
  5. |   BRA   2019   14.105362 |
  6. |   BRA   2020   16.870855 |
  7. |   CHL   2018   28.507184 |
  8. |   CHL   2019   28.023112 |
  9. |   CHL   2020   31.544868 |
 10. |   FRA   2018   31.719156 |
     +--------------------------+

</code></pre>
<h1><a href="#datos-en-panel" id="datos-en-panel">Datos en panel</a></h1>
<ul>
<li>Varias unidades (<em>N</em>) de <em>cross-section</em> en el tiempo (doble variabilidad).</li>
<li>Efectos no observables que varian solo por individuo.</li>
<li>Si no los incluimos: <strong>sesgo</strong> por variable omitida.</li>
</ul>
<h2><a href="#estimador-de-efectos-fijos" id="estimador-de-efectos-fijos">Estimador de efectos fijos</a></h2>
<p>\begin{equation} y_{it} = x&rsquo;_{it} \beta + \mu_i + \epsilon_{it} \end{equation}</p>
<ul>
<li>Incorpora <em>(N - 1)</em> variables binarias por individuo (distinto intercepto por individuo).</li>
</ul>
<p>\begin{equation} y_{it} = \underbrace{\mu_i + \beta_1} + \beta_2 x_{2,it} + &hellip; + \beta_K x_{K,it} + \epsilon_{it} \end{equation}</p>
<ul>
<li>El estimador de EF es el estimador de MCO con <em>(N - 1)</em> variables binarias.</li>
<li><em>Transfomacion within</em>: controlar por efectos fijos es identico a restar a cada observacion la media individual (varaibles originales transformadas).</li>
</ul>
<pre><code></code></pre>
<p><img src="Graph1.svg" ></p>
<h1><a href="#definición-de-unidad-de-información" id="definición-de-unidad-de-información">Definición de unidad de información</a></h1>
<pre><code>. use wb_data.dta, clear

. egen id = group(ccode)

. order id year

. tsset id year, yearly
       panel variable:  id (strongly balanced)
        time variable:  year, 2011 to 2020
                delta:  1 year

</code></pre>
<h1><a href="#creación-de-variables" id="creación-de-variables">Creación de variables</a></h1>
<pre><code>. gen gdp_gr = ((gdp_pc2017 / L.gdp_pc2017) - 1) * 100
(6 missing values generated)

. egen open = rowtotal(exports imports)

. label var gdp_gr &quot;Crecimiento (PIBpc)&quot;

. label var credit_ps &quot;Credito al Sector Privado (%PIB)&quot;

. label var inv &quot;Inversion (%PIB)&quot;

. label var open &quot;Apertura comercial (%PIB)&quot;

</code></pre>
<h1><a href="#estimación-de-datos-en-panel" id="estimación-de-datos-en-panel">Estimación de datos en panel</a></h1>
<pre><code>. xtreg gdp_gr credit_ps inv open, fe rob

Fixed-effects (within) regression               Number of obs     =         50
Group variable: id                              Number of groups  =          6

R-sq:                                           Obs per group:
     within  = 0.2391                                         min =          6
     between = 0.1559                                         avg =        8.3
     overall = 0.0036                                         max =          9

                                                F(3,5)            =       8.45
corr(u_i, Xb)  = -0.9274                        Prob &gt; F          =     0.0211

                                     (Std. Err. adjusted for 6 clusters in id)
------------------------------------------------------------------------------
             |               Robust
      gdp_gr |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   credit_ps |  -.1650893   .0497205    -3.32   0.021       -.2929   -.0372786
         inv |  -.0129307   .4623333    -0.03   0.979    -1.201396    1.175535
        open |   .2122379   .2060205     1.03   0.350    -.3173547    .7418306
       _cons |    4.25308   5.948281     0.72   0.507    -11.03746    19.54362
-------------+----------------------------------------------------------------
     sigma_u |  4.9436236
     sigma_e |  2.7243547
         rho |  .76705105   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. 
. eststo: xtreg gdp_gr credit_ps inv, fe rob

Fixed-effects (within) regression               Number of obs     =         50
Group variable: id                              Number of groups  =          6

R-sq:                                           Obs per group:
     within  = 0.1953                                         min =          6
     between = 0.2458                                         avg =        8.3
     overall = 0.0029                                         max =          9

                                                F(2,5)            =      12.87
corr(u_i, Xb)  = -0.9779                        Prob &gt; F          =     0.0107

                                     (Std. Err. adjusted for 6 clusters in id)
------------------------------------------------------------------------------
             |               Robust
      gdp_gr |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   credit_ps |  -.1834226   .0459604    -3.99   0.010    -.3015675   -.0652776
         inv |   .0824069   .3010481     0.27   0.795    -.6914619    .8562758
       _cons |   14.65619   4.310253     3.40   0.019     3.576333    25.73605
-------------+----------------------------------------------------------------
     sigma_u |  8.2829275
     sigma_e |    2.76808
         rho |  .89953649   (fraction of variance due to u_i)
------------------------------------------------------------------------------
(est5 stored)

. eststo: xtreg gdp_gr credit_ps inv open, fe rob

Fixed-effects (within) regression               Number of obs     =         50
Group variable: id                              Number of groups  =          6

R-sq:                                           Obs per group:
     within  = 0.2391                                         min =          6
     between = 0.1559                                         avg =        8.3
     overall = 0.0036                                         max =          9

                                                F(3,5)            =       8.45
corr(u_i, Xb)  = -0.9274                        Prob &gt; F          =     0.0211

                                     (Std. Err. adjusted for 6 clusters in id)
------------------------------------------------------------------------------
             |               Robust
      gdp_gr |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   credit_ps |  -.1650893   .0497205    -3.32   0.021       -.2929   -.0372786
         inv |  -.0129307   .4623333    -0.03   0.979    -1.201396    1.175535
        open |   .2122379   .2060205     1.03   0.350    -.3173547    .7418306
       _cons |    4.25308   5.948281     0.72   0.507    -11.03746    19.54362
-------------+----------------------------------------------------------------
     sigma_u |  4.9436236
     sigma_e |  2.7243547
         rho |  .76705105   (fraction of variance due to u_i)
------------------------------------------------------------------------------
(est6 stored)

. esttab using regs_cre.csv, se bracket r2 star(* 0.10 ** 0.05 *** 0.01) label replace
(output written to regs_cre.csv)

</code></pre>
<h1><a href="#comandos-útiles" id="comandos-útiles">Comandos útiles</a></h1>
<ul>
<li><code>sort</code> ordena las observaciones de acuerdo a una variable determinada en forma creciente.</li>
<li><code>gsort –edad</code> ordena las observaciones de acuerdo a la variable edad en forma decreciente.</li>
<li><code>order</code> ordena la lista de variables.</li>
<li><code>move</code> cambia la posición de dos variables en la lista de variables.</li>
<li><code>cd</code> cambia de directorio.</li>
<li><code>use</code> carga una base de datos.</li>
<li><code>save</code> guarda una base de datos.</li>
<li><code>clear</code> limpia la memoria .</li>
<li><code>drop</code> elimina variables u observaciones.</li>
<li><code>keep</code> mantiene ciertas variables u observaciones.</li>
<li><code>rename</code> renombra variables.</li>
<li><code>summarize</code> estadísticas descriptivas.</li>
<li><code>pwcorr</code> matrices de correlación.</li>
<li><code>corrgram</code> muestra la autocorrelación y la autocorrelación parcial.</li>
<li><code>regress</code> regresión por mínimos cuadrados ordinarios.</li>
<li><code>label</code> incorpora etiquetas a las variables.</li>
<li><code>predict</code> genera valores ajustados, residuos, etc.</li>
<li><code>esttab</code> editar la salida de una regresión.</li>
</ul>
